dfbdfgfg1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char input«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба выш1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char input«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышdfbdfgfg1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char input«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба выш1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char input«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышdfbdfgfg1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char input«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба выш1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char input«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышdfbdfgfg1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char input«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба выш1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char input«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышdfbdfgfg1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char input«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба выш1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char input«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышdfbdfgfg1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char input«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба выш1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char input«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышdfbdfgfg1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char input«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба выш1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char input«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышdfbdfgfg1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char input«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба выш1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char input«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышdfbdfgfg1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char input«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба выш1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char input«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышdfbdfgfg1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char input«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба выш1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char input«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба вышли des imbéciles 18. Ипполит, по крайней мере, покойный дурак, а Анатоль — беспокойный. Вот одно различие, — сказал он, улыбаясь более неестественно и одушевленно, чем обыкновенно, и при этом особенно резко выказывая в сложившихся около его рта морщинах что-то неожиданно-грубое и неприятное.— И зачем родятся дети у таких людей, как вы? Ежели бы вы не были отец, я бы ни в чем не могла упрекнуть вас, — сказала Анна Павловна, задумчиво поднимая глаза.— Je suis votre верный раб, et à vous seule je puis l'avouer. Мои дети — ce sont les entraves de mon existence 19. Это мой крест. Я так себе объясняю. Que voulez-vous?.. 20 — Он помолчал, выражая жестом свою покорность жестокой судьбе.Анна Павловна задумалась.— Вы никогда не думали о том, чтобы женить вашего блудного сына Анатоля. Говорят, — сказала она, — что старые девицы ont la manie des mariages 21. Я еще не чувствую за собою этой слабости, но у меня есть одна petite personne, которая очень несчастлива с отцом, une parente à nous, une princesse 22 Болконская. — Князь Василий не отвечал, хотя с свойственной светским людям быстротой соображения и памятью движением головы показал, что он принял к соображению это сведенье.— Нет, вы знаете ли, что этот Анатоль мне стоит сорок тысяч в год, — сказал он, видимо не в силах удерживать печальный ход своих мыслей. Он помолчал.— Что будет через пять лет, ежели это пойдет так? Voilà l'avantage d'être père 23. Она богата, ваша княжна?— Отец очень богат и скуп. Он живет в деревне. Знаете, этот известный князь Болконский, отставленный еще при покойном императоре и прозванный прусским королем. Он очень умный человек, но со странностями и тяжелый. La pauvre petite est malheureuse comme les pierres 24. У нее брат, вот что недавно женился на Lise Мейнен, адъютант Кутузова. Он будет нынче у меня.— Ecoutez, chère Annette 25, — сказал князь, взяв вдруг свою собеседницу за руку и пригибая ее почему-то книзу. — Arrangez-moi cette affaire et je suis votre вернейший раб à tout jamais (рап — comme mon староста m'écrit des 26 донесенья: покой-ер-п). Она хорошей фамилии и богата. Все, что мне нужно.И он с теми свободными и фамильярными грациозными движениями, которые его отличали, взял за руку фрейлину, поцеловал ее и, поцеловав, помахал фрейлинскою рукой, развалившись на креслах и глядя в сторону.— Attendez 27, — сказала Анна Павловна, соображая. — Я нынче же поговорю Lise (la femme du jeune Болконский) 28. И, может быть, это уладится. Ce sera dans votre famille que je ferai mon apprentissage de vieille fille 29.1Ну, князь, Генуя и Лукка — поместья фамилии Бонапарте. Нет, я вам вперед говорю, если вы мне не скажете, что у нас война, если вы еще позволите себе защищать все гадости, все ужасы этого Антихриста (право, я верю, что он Антихрист), — я вас больше не знаю, вы уж не друг мой, вы уж не мой верный раб, как вы говорите (франц.).(В дальнейшем переводы с французского не оговариваются. Здесь и далее все переводы, кроме специально оговоренных, принадлежат Л. Н. Толстому. — Ред.)2Я вижу, что я вас пугаю.3Если у вас, граф (или князь), нет в виду ничего лучшего и если перспектива вечера у бедной больной не слишком вас пугает, то я буду очень рада видеть вас нынче у себя между семью и десятью часами. Анна Шерер.4Господи, какое горячее нападение!5Прежде всего скажите, как ваше здоровье, милый друг?6Признаюсь, все эти праздники и фейерверки становятся несносны.7Не мучьте меня. Ну, что же решили по случаю депеши Новосильцева? Вы все знаете.8Что решили? Решили, что Бонапарте сжег свои корабли, и мы тоже, кажется, готовы сжечь наши.9Этот пресловутый нейтралитет Пруссии — только западня.10Кстати, — виконт Мортемар, он в родстве с Монморанси чрез Роганов.11аббат Морио.12вдовствующая императрица.13Барон этот ничтожное существо, как кажется.14Барон Функе рекомендован императрице-матери ее сестрою.15много уважения.16Кстати, о вашем семействе... составляет наслаждение всего общества. Ее находят прекрасною, как день.17Что делать! Лафатер сказал бы, что у меня нет шишки родительской любви.18дурни.19Я вас... и вам одним могу признаться. Мои дети — обуза моего существования.20Что делать?..21имеют манию женить.22девушка... наша родственница, княжна.23Вот выгода быть отцом.24Бедняжка несчастлива, как камни.25Послушайте, милая Анет.26Устройте мне это дело, и я навсегда ваш... как мой староста мне пишет.27Постойте.28Лизе (жене Болконского).29Я в вашем семействе начну обучаться ремеслу старой девицы.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.МетрикаПоиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мир. Том первый. Часть перваяIIГостиная Анны Павловны начала понемногу наполняться. Приехала высшая знать Петербурга, люди самые разнородные по возрастам и характерам, но одинаковые по обществу, в каком все жили; приехала дочь князя Василия, красавица Элен, заехавшая за отцом, чтобы с ним вместе ехать на праздник посланника. Она была в шифре и бальном платье. Приехала и известная, как la femme la plus séduisante de Pétersbourg 1, молодая, маленькая княгиня Болконская, прошлую зиму вышедшая замуж и теперь не выезжавшая в большой свет по причине своей беременности, но ездившая еще на небольшие вечера. Приехал князь Ипполит, сын князя Василия, с Мортемаром, которого он представил; приехал и аббат Морио и многие другие.— Вы не видали еще, — или: — вы не знакомы с ma tante? 2 — говорила Анна Павловна приезжавшим гостям и весьма серьезно подводила их к маленькой старушке в высоких бантах, выплывшей из другой комнаты, как скоро стали приезжать гости, называла их по имени, медленно переводя глаза с гостя на ma tante, и потом отходила.Все гости совершали обряд приветствования никому не известной, никому не интересной и не нужной тетушки. Анна Павловна с грустным, торжественным участием следила за их приветствиями, молчаливо одобряя их. Ma tante каждому говорила в одних и тех же выражениях о его здоровье, о своем здоровье и о здоровье ее величества, которое нынче было, слава Богу, лучше. Все подходившие, из приличия не выказывая поспешности, с чувством облегчения исполненной тяжелой обязанности отходили от старушки, чтоб уж весь вечер ни разу не подойти к ней.Молодая княгиня Болконская приехала с работой в шитом золотом бархатном мешке. Ее хорошенькая, с чуть черневшимися усиками верхняя губка была коротка по зубам, но тем милее она открывалась и тем еще милее вытягивалась иногда и опускалась на нижнюю. Как это бывает у вполне привлекательных женщин, недостаток ее — короткость губы и полуоткрытый рот — казались ее особенною, собственно ее красотой. Всем было весело смотреть на эту полную здоровья и живости хорошенькую будущую мать, так легко переносившую свое положение. Старикам и скучающим, мрачным молодым людям казалось, что они сами делаются похожи на нее, побыв и поговорив несколько времени с ней. Кто говорил с ней и видел при каждом слове ее светлую улыбочку и блестящие белые зубы, которые виднелись беспрестанно, тот думал, что он особенно нынче любезен. И это думал каждый.Маленькая княгиня, переваливаясь, маленькими быстрыми шажками обошла стол с рабочею сумочкой на руке и, весело оправляя платье, села на диван, около серебряного самовара, как будто все, что она ни делала, было partie de plaisir 3 для нее и для всех ее окружавших.— J'ai apporté mon ouvrage 4, — сказала она, развертывая свой ридикюль и обращаясь ко всем вместе.— Смотрите, Annette, ne me jouez pas un mauvais tour, — обратилась она к хозяйке. — Vous m'avez écrit que c'était une toute petite soirée; voyez comme je suis attifée 5.И она развела руками, чтобы показать свое, в кружевах, серенькое изящное платье, немного ниже грудей опоясанное широкою лентой.— Soyez tranquille, Lise, vous serez toujours la plus jolie 6, — отвечала Анна Павловна.— Vous savez, mon mari m'abandonne, — продолжала она тем же тоном, обращаясь к генералу, — il va se faire tuer. Dites-moi, pourquoi cette vilaine guerre 7, — сказала она князю Василию и, не дожидаясь ответа, обратилась к дочери князя Василия, к красивой Элен.— Quelle délicieuse personne, que cette petite princesse! 8 — сказал князь Василий тихо Анне Павловне.Вскоре после маленькой княгини вошел массивный, толстый молодой человек с стриженою головой, в очках, светлых панталонах по тогдашней моде, с высоким жабо и в коричневом фраке. Этот толстый молодой человек был незаконный сын знаменитого екатерининского вельможи, графа Безухова, умиравшего теперь в Москве. Он нигде не служил еще, только что приехал из-за границы, где он воспитывался, и был первый раз в обществе. Анна Павловна приветствовала его поклоном, относящимся к людям самой низшей иерархии в ее салоне. Но, несмотря на это низшее по своему сорту приветствие, при виде вошедшего Пьера в лице Анны Павловны изобразилось беспокойство и страх, подобный тому, который выражается при виде чего-нибудь слишком огромного и несвойственного месту. Хотя действительно Пьер был несколько больше других мужчин в комнате, но этот страх мог относиться только к тому умному и вместе робкому, наблюдательному и естественному взгляду, отличавшему его от всех в этой гостиной.— C'est bien aimable à vous, monsieur Pierre, d'être venu voir une pauvre malade 9, — сказала ему Анна Павловна, испуганно переглядываясь с тетушкой, к которой она подводила его. Пьер пробурлил что-то непонятное и продолжал отыскивать что-то глазами. Он радостно, весело улыбнулся, кланяясь маленький княгине, как близкой знакомой, и подошел к тетушке. Страх Анны Павловны был не напрасен, потому что Пьер, не дослушав речи тетушки о здоровье ее величества, отошел от нее. Анна Павловна испуганно остановила его словами:— Вы не знаете аббата Морио? Он очень интересный человек... — сказала она.— Да, я слышал про его план вечного мира, и это очень интересно, но едва ли возможно...— Вы думаете?.. — сказала Анна Павловна, чтобы сказать что-нибудь и вновь обратиться к своим занятиям хозяйки дома, но Пьер сделал обратную неучтивость. Прежде он, не дослушав слов собеседницы, ушел; теперь он остановил своим разговором собеседницу, которой нужно было от него уйти. Он, нагнув голову и расставив большие ноги, стал доказывать Анне Павловне, почему он полагал, что план аббата был химера.— Мы после поговорим, — сказала Анна Павловна, улыбаясь.И, отделавшись от молодого человека, не умеющего жить, она возвратилась к своим занятиям хозяйки дома и продолжала прислушиваться и приглядываться, готовая подать помощь на тот пункт, где ослабевал разговор. Как хозяин прядильной мастерской, посадив работников по местам, прохаживается по заведению, замечая неподвижность или непривычный, скрипящий, слишком громкий звук веретена, торопливо идет, сдерживает или пускает его в надлежащий ход, — так и Анна Павловна, прохаживаясь по своей гостиной, подходила к замолкнувшему или слишком много говорившему кружку и одним словом или перемещением опять заводила равномерную, приличную разговорную машину. Но среди этих забот все виден был в ней особенный страх за Пьера. Она заботливо поглядывала на него в то время, как он подошел послушать то, что говорилось около Мортемара, и отошел к другому кружку, где говорил аббат. Для Пьера, воспитанного за границей, этот вечер Анны Павловны был первый, который он видел в России. Он знал, что тут собрана вся интеллигенция Петербурга, и у него, как у ребенка в игрушечной лавке, разбегались глаза. Он все боялся пропустить умные разговоры, которые он может услыхать. Глядя на уверенные и изящные выражения лиц, собранных здесь, он все ждал чего-нибудь особенно умного. Наконец он подошел к Морио. Разговор показался ему интересен, и он остановился, ожидая случая высказать свои мысли, как это любят молодые люди.1самая обворожительная женщина в Петербурге.2Моей тетушкой?3Увеселение.4Я захватила работу.5не сыграйте со мной злой шутки; вы мне писали, что у вас совсем маленький вечер. Видите, как я укутана.6Будьте покойны, Лиза, вы все-таки будете лучше всех.7Вы знаете, мой муж покидает меня. Идет на смерть. Скажите, зачем эта гадкая война.8Что за милая особа, эта маленькая княгиня!9Очень мило с вашей стороны, мосье Пьер, что вы приехали навестить бедную больную.о тексте/оглавление	© Это произведение перешло в общественное достояние. Произведение написано автором, умершим более семидесяти лет назад, и опубликовано прижизненно, либо посмертно, но с момента публикации также прошло более семидесяти лет. Оно может свободно использоваться любым лицом без чьего-либо согласия или разрешения и без выплаты авторского вознаграждения.Atlex - надежный хостингEmail: otklik@ilibrary.ru	О библиотеке©1996—2019 Алексей Комаров. Подборка произведений, оформление, программирование. Яндекс.Метрика#ifdef _WIN32#define _CRT_SECURE_NO_DEPRECATE#define NL "\r\n"#else#define NL "\n"#endif#include <fstream>#include <string>#include <vector>#include <unordered_map>#include <cassert>#include <iostream>#include <bitset>#include <algorithm>using namespace std;struct pnode{	unsigned char ch; // char	int p;		// probability};static int pnode_compare(const void* elem1, const void* elem2){	const pnode a = *(pnode*)elem1;	const pnode b = *(pnode*)elem2;	if (a.ch < b.ch) return 1; // 1 - less (reverse for decreasing sort)	else if (a.ch > b.ch) return -1;	return 0;}struct treenode : public pnode{	char lcode;	char rcode;	treenode* left; // left child	treenode* right; // right child};void BubbleSort(pnode* t,int tsize) {	vector<pair<char, int >>test;		for (int i = 0; i < tsize;i++){		test.push_back(make_pair(t[i].ch, t[i].p));	}		pair<char, int >temp;		for (int i = 0; i < tsize-1; i++) 		for (int j = tsize-1 - 1; j >= i; j--) {		temp = test[j];				if (test[j].second != test[j + 1].second) {			test.erase(test.begin() + j);			if (temp.second > test[j].second)				test.insert(test.begin() + j, temp);			else				test.insert(test.begin() + (j + 1), temp);		}	}	for (int i = 0; i < test.size(); i++){		t[i].ch = test[i].first;		t[i].p = test[i].second;	}	}/*The parameter dir indicates the sorting direction, ASCENDING   or DESCENDING; if (a[i] > a[j]) agrees with the direction,   then a[i] and a[j] are interchanged.*/void compAndSwap(pnode* t, int i, int j, int dir){	if (dir == (t[i].p > t[j].p))		swap(t[i], t[j]);}/*It recursively sorts a bitonic sequence in ascending order,  if dir = 1, and in descending order otherwise (means dir=0).  The sequence to be sorted starts at index position low,  the parameter cnt is the number of elements to be sorted.*/void bitonicMerge(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		for (int i = low; i < low + k; i++)			compAndSwap(t, i, i + k, dir);		bitonicMerge(t, low, k, dir);		bitonicMerge(t, low + k, k, dir);	}}/* This function first produces a bitonic sequence by recursively    sorting its two halves in opposite sorting orders, and then    calls bitonicMerge to make them in the same order */void bitonicSort(pnode*t, int low, int cnt, int dir){	if (cnt > 1)	{		int k = cnt / 2;		// sort in ascending order since dir here is 1 		bitonicSort(t, low, k, 1);		// sort in descending order since dir here is 0 		bitonicSort(t, low + k, k, 0);		// Will merge wole sequence in ascending order 		// since dir=1. 		bitonicMerge(t, low, cnt, dir);	}}/* Caller of bitonicSort for sorting the entire array of   length N in ASCENDING order */void sort(pnode*t , int N, int up){	bitonicSort(t, 0, N, up);}class Coder{private:	int tsize; // table size (number of chars)	pnode* ptable; // table of probabilities	unordered_map<char, string> codes; // codeword for each charpublic:	void Encode(const char* inputFilename, const char* outputFilename, int streamNumber, int sortType,int dataBlockNumber)	{		unordered_map<char, int> freqs; // frequency for each char from input text		int i;		//  Opening input file		//		FILE* inputFile;		inputFile = fopen(inputFilename, "r");		assert(inputFile);		//  Counting chars		//		char ch; // char		while (fscanf(inputFile, "%c", &ch) != EOF)			freqs[ch]++;		if (sortType) {			tsize = 256;		}		else {			tsize = freqs.size();		}		//  Building decreasing freqs table		//		ptable = new pnode[tsize];		for (int i = 0; i < tsize; i++) {			ptable[i].ch = NULL;			ptable[i].p = 0;		}		assert(ptable);		unordered_map<char, int>::iterator fi;		for (fi = freqs.begin(), i = 0; fi != freqs.end(); ++fi, ++i)		{			ptable[i].ch = (*fi).first;			ptable[i].p = (*fi).second;// / ftot;		}		//Sort by chars		qsort(ptable, tsize, sizeof(pnode), pnode_compare);		//Sort by frequency		if (sortType) {			sort(ptable, tsize, 0);		}		else {			BubbleSort(ptable, tsize);		}		EncHuffman(dataBlockNumber);		//  Opening output file		FILE* outputFile;		outputFile = fopen(outputFilename, "wb");		assert(outputFile);		//  Outputing ptable and codes		//printf("%i" NL, tsize);		//fprintf(outputFile, "%i" NL, tsize);		if (sortType) {			printf("__________BITONIC SORT__________\n" );			fprintf(outputFile, "__________BITONIC SORT__________\n");		}		else {			printf("___________BUBBLE SORT___________\n");			fprintf(outputFile, "___________BUBBLE SORT___________\n");		}		int lettersCounter = 0;		for (i = 0; i < tsize; i++)		{			if (ptable[i].p != 0) {				printf("%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				fprintf(outputFile, "%d   %c\t%d\t%X\t%d\t%s" NL, lettersCounter+1, ptable[i].ch, unsigned int(ptable[i].ch), unsigned int(ptable[i].ch), ptable[i].p, codes[ptable[i].ch].c_str());				lettersCounter++;			}		}		//  Outputing encoded text		fseek(inputFile, SEEK_SET, 0);		printf(NL);		fprintf(outputFile, NL);		vector<string> charStream;		vector<vector<string>> StringsArr;		vector<string> StringsArr32;		StringsArr.resize(streamNumber);		StringsArr32.resize(streamNumber);		while (fscanf(inputFile, "%c", &ch) != EOF)			charStream.push_back(codes[ch].c_str());		//Division into streams		for (int j = 0; j < streamNumber; j++)			for (int z = j; z < charStream.size(); z += streamNumber)				StringsArr[j].push_back(charStream[z]);		//Stream lines formation		for (int z = 0; z < streamNumber; z++)			for (int j = 0; j < StringsArr[z].size(); j++)				StringsArr32[z] += StringsArr[z][j];		//Checking strings for 32-bit multiplicity		for (int z = 0; z < streamNumber; z++) {			if (StringsArr32[z].size() % 32 != 0)				for (int k = 0; k < StringsArr32[z].size() % 32; k++)					StringsArr32[z] += '0';		}		//Searching the longest string		int maxLength = StringsArr32[0].size();		for (int z = 1; z < streamNumber; z++) {			if (maxLength < StringsArr32[z].size())				maxLength = StringsArr32[z].size();		}		//Reducing strings to the same size (max)		for (int z = 0; z < streamNumber; z++) {			int k = maxLength - StringsArr32[z].size();			for (int i = 0; i < k; i++) {				StringsArr32[z] += "0";			}		}		//Printing in columns		fprintf(outputFile, "________STREAM NUMBER: %d________\n", streamNumber);		for (int i = 0; i < StringsArr32[0].size(); i += 32) {			for (int z = 0; z < streamNumber; z++) {				for (int j = i; j < i + 32; j++) {					fprintf(outputFile, "%c", StringsArr32[z][j]);				}				fprintf(outputFile, "\t");			}			fprintf(outputFile, "\n");		}		printf(NL);		//  Cleaning		codes.clear();		delete[] ptable;		//  Closing files		fclose(outputFile);		fclose(inputFile);	}	//void Decode(const char* inputFilename, const char* outputFilename)	//{	//	//  Opening input file	//	FILE* inputFile;	//	inputFile = fopen(inputFilename, "r");	//	assert(inputFile);	//	//  Loading codes	//	fscanf(inputFile, "%i", &tsize);	//	char ch, code[128];	//	float p;	//	int i;	//	fgetc(inputFile); // skip end line	//	for (i = 0; i < tsize; i++)	//	{	//		ch = fgetc(inputFile);	//		fscanf(inputFile, "%f %s", &p, code);	//		codes[ch] = code;	//		fgetc(inputFile); // skip end line	//	}	//	fgetc(inputFile); // skip end line	//	//  Opening output file	//	//	//	FILE* outputFile;	//	outputFile = fopen(outputFilename, "w");	//	assert(outputFile);	//	//  Decoding and outputing to file	//	//	//	string accum = "";	//	unordered_map<char, string>::iterator ci;	//	while ((ch = fgetc(inputFile)) != EOF)	//	{	//		accum += ch;	//		for (ci = codes.begin(); ci != codes.end(); ++ci)	//			if (!strcmp((*ci).second.c_str(), accum.c_str()))	//			{	//				accum = "";	//				printf("%c", (*ci).first);	//				fprintf(outputFile, "%c", (*ci).first);	//			}	//	}	//	printf(NL);	//	//  Cleaning	//	//	//	fclose(outputFile);	//	fclose(inputFile);	//}private:	void EncHuffman(int dataBlockNumber)	{		//  Creating leaves (initial top-nodes)		treenode* n;		vector<treenode*> tops; // top-nodes		int i, numtop = tsize;		for (i = 0; i < numtop; i++)		{			n = new treenode;			assert(n);			n->ch = ptable[i].ch;			n->p = ptable[i].p;			n->left = NULL;			n->right = NULL;			tops.push_back(n);		}		//  Building binary tree.		//  Combining last two nodes, replacing them by new node		//  without invalidating sort		ofstream firstStep;		firstStep.open("treeBuilding_"+ to_string(dataBlockNumber) +".txt");		while (numtop > 1)		{			n = new treenode;			assert(n);			n->p = tops[numtop - 2]->p + tops[numtop - 1]->p;			n->left = tops[numtop - 2];			n->right = tops[numtop - 1];			firstStep << "\' " << tops[numtop - 2]->ch << " \'" << " (" << tops[numtop - 2]->p << ") " << "+" << "\' " << tops[numtop - 1]->ch << " \'" << " (" << tops[numtop - 1]->p << ") =" << tops[numtop - 2]->p + tops[numtop - 1]->p << endl;			if (n->left->p < n->right->p)			{				n->lcode = '0';				n->rcode = '1';			}			else			{				n->lcode = '1';				n->rcode = '0';			}			tops.pop_back();			tops.pop_back();			bool isins = false;			std::vector<treenode*>::iterator ti;			for (ti = tops.begin(); ti != tops.end(); ++ti)				if ((*ti)->p <= n->p)//Was lower				{					tops.insert(ti, n);					isins = true;					break;				}			if (!isins) tops.push_back(n);			numtop--;		}		firstStep.close();		//  Building codes		treenode* root = tops[0];		GenerateCode(root);		//  Cleaning		DestroyNode(root);		tops.clear();	}	void GenerateCode(treenode* node) // for outside call: node is root	{		static string sequence = "";		if (node->left)		{			sequence += node->lcode;			GenerateCode(node->left);		}		if (node->right)		{			sequence += node->rcode;			GenerateCode(node->right);		}		if (!node->left && !node->right)			codes[node->ch] = sequence;		int l = (int)sequence.length();		if (l > 1) sequence = sequence.substr(0, l - 1);		else sequence = "";	}	void DestroyNode(treenode* node) // for outside call: node is root	{		if (node->left)		{			DestroyNode(node->left);			delete node->left;			node->left = NULL;		}		if (node->right)		{			DestroyNode(node->right);			delete node->right;			node->right = NULL;		}	}};int show_usage() {	printf("Huffman coding algorithm" NL);	printf("progName.exe fileName.txt" NL);	printf(NL);	exit(0);}int main(int argc, char** argv){	int dFlag = 0;	int streamNumber = 1;	int sortType = 0;	int packSize = 0xffffffff;	char inputFilename[128];	char outputFilename[128];		setlocale(LC_ALL, "Russian");		if ((argc == 1)||(strcmp(argv[1], "-i") == 0)){		cout << endl << endl;		cout << ">>------------------   Информационная панель  ------------------<<" << endl;		cout << ">>Формат запуска программы:                                     <<" << endl;		cout << ">>      <progName>.exe <inputFile.txt> -param_1 -param_2 ...    <<" << endl;		cout << ">>Параметры:                                                    <<" << endl;		cout << ">>  -i     |  Информация о параметрах                           <<" << endl;		cout << ">>  -s     |  Количество потоков                                <<" << endl;		cout << ">>  -t     |  Сортировка Бэтчера (по умолчанию \"пузырьком\")     <<" << endl;		cout << ">>  -p     |  Количество пакетов данных                         <<" << endl;		cout << ">>--------------------------------------------------------------<<" << endl;		cout << endl;		return 0;	}	strcpy(inputFilename, argv[1]);	for (uint_fast16_t i = 2; i < argc; i++) {				if (strcmp(argv[i], "-d") == 0) {			dFlag = 1;		}		if (strcmp(argv[i], "-t") == 0) {			sortType = 1;		}		if (strcmp(argv[i], "-s") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &streamNumber);		}		if (strcmp(argv[i], "-з") == 0) {			if (argv[i + 1][0] != '-')				sscanf_s(argv[i + 1], "%d", &packSize);		}	}	//if (dFlag) {	//	strcpy(outputFilename, "decoded.txt");	//}	//else {	//strcpy(outputFilename, "encoded.txt");	//}	string text = "";	ifstream fin(inputFilename);	vector<ofstream> filePart;	filePart.resize(1);	filePart[0].open("StandartDataPart_0.txt");	string buff;	int temp;	vector<vector<char>> charArray;	charArray.resize(1);	int fileCounter = 0;	if (fin.is_open()) {		while (getline(fin, buff)) {			if(packSize>fileCounter)			for (int j = 0; j < buff.size(); j++)				if (charArray[fileCounter].size() < 65536) {					charArray[fileCounter].push_back(buff[j]);					filePart[fileCounter] << buff[j];				}				else {					fileCounter++;					charArray.resize(charArray.size()+1);					filePart.resize(filePart.size() + 1);					filePart[fileCounter].open("StandartDataPart_"+to_string(fileCounter)+".txt");					break;				}		}	}	else {		printf("Can't open File!\n");		return 0;	}	cout << fileCounter << endl;	fin.close();	filePart[0].close();	for (int j = 0; j < fileCounter+1; j++) {				ofstream fileHex;		fileHex.open("StandartDataHEX_" + to_string(j) + ".txt");		for (int i = 0; i < charArray[j].size(); i++)			fileHex << hex << ((uint32_t)charArray[j][i] & 0x000000FF) << endl;		fileHex.close();		string t1 = "StandartDataPart_" + to_string(j) + ".txt";		strcpy(inputFilename, t1.c_str());		string t2 = "encoded_" + to_string(j) + ".txt";		strcpy(outputFilename, t2.c_str());		//  Calling encoding or decoding subroutine		Coder* coder;		coder = new Coder;		assert(coder);		if (!dFlag) {			coder->Encode(inputFilename, outputFilename, streamNumber, sortType,j);		}		//else {		//	coder->Decode(inputFilename, outputFilename);		//}		delete coder;		printf(NL);		ofstream filetest;	}	return 0;}Поиск: автор и/или название произведения  Авторы Л. Н. Толстой. Война и мирЛев ТолстойВОЙНА И МИРТОМ ПЕРВЫЙЧАСТЬ ПЕРВАЯI— Eh bien, mon prince. Gênes et Lucques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j'y crois) — je ne vous connais plus, vous n'êtes plus mon ami, vous n'êtes plus мой верный раб, comme vous dites 1. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur 2, садитесь и рассказывайте.Так говорила в июле 1805 года известная Анна Павловна Шерер, фрейлина и приближенная императрицы Марии Феодоровны, встречая важного и чиновного князя Василия, первого приехавшего на ее вечер. Анна Павловна кашляла несколько дней, у нее был грипп, как она говорила (грипп был тогда новое слово, употреблявшееся только редкими). В записочках, разосланных утром с красным лакеем, было написано без различия во всех:«Si vous n'avez rien de mieux à faire, Monsieur le comte (или mon prince), et si la perspective de passer la soirée chez une pauvre malade ne vous effraye pas trop, je serai charmée de vous voir chez moi entre 7 et 10 heures. Annette Scherer» 3.— Dieu, quelle virulente sortie! 4 — отвечал, нисколько не смутясь такою встречей, вошедший князь, в придворном, шитом мундире, в чулках, башмаках и звездах, с светлым выражением плоского лица.Он говорил на том изысканном французском языке, на котором не только говорили, но и думали наши деды, и с теми, тихими, покровительственными интонациями, которые свойственны состаревшемуся в свете и при дворе значительному человеку. Он подошел к Анне Павловне, поцеловал ее руку, подставив ей свою надушенную и сияющую лысину, и покойно уселся на диване.— Avant tout dites-moi, comment vous allez, chère amie? 5 Успокойте меня, — сказал он, не изменяя голоса и тоном, в котором из-за приличия и участия просвечивало равнодушие и даже насмешка.— Как можно быть здоровой... когда нравственно страдаешь? Разве можно, имея чувство, оставаться спокойною в наше время? — сказала Анна Павловна. — Вы весь вечер у меня, надеюсь?— А праздник английского посланника? Нынче середа. Мне надо показаться там, — сказал князь. — Дочь заедет за мной и повезет меня.— Я думала, что нынешний праздник отменен, Je vous avoue que toutes ces fêtes et tous ces feux d'artifice commencent à devenir insipides 6.— Ежели бы знали, что вы этого хотите, праздник бы отменили, — сказал князь по привычке, как заведенные часы, говоря вещи, которым он и не хотел, чтобы верили.— Ne me tourmentez pas. Eh bien, qu'a-t-on décidé par rapport à la dépêche de Novosilzoff? Vous savez tout 7.— Как вам сказать? — сказал князь холодным, скучающим тоном. — Qu'a-t-on décidé? On a décidé que Buonaparte a brûlé ses vaisseaux, et je crois que nous sommes en train de brûler les nôtres 8.Князь Василий говорил всегда лениво, как актер говорит роль старой пиесы. Анна Павловна Шерер, напротив, несмотря на свои сорок лет, была преисполнена оживления и порывов.Быть энтузиасткой сделалось ее общественным положением, и иногда, когда ей даже того не хотелось, она, чтобы не обмануть ожиданий людей, знавших ее, делалась энтузиасткой. Сдержанная улыбка, игравшая постоянно на лице Анны Павловны, хотя и не шла к ее отжившим чертам, выражала, как у избалованных детей, постоянное сознание своего милого недостатка, от которого она не хочет, не может и не находит нужным исправляться.В середине разговора про политические действия Анна Павловна разгорячилась.— Ах, не говорите мне про Австрию! Я ничего не понимаю, может быть, но Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы. Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю. Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его, и он исполнит свое призвание задавить гидру революции, которая теперь еще ужаснее в лице этого убийцы и злодея. Мы одни должны искупить кровь праведника. На кого нам надеяться, я вас спрашиваю?.. Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра. Она отказалась очистить Мальту. Она хочет видеть, ищет заднюю мысль наших действий. Что они сказали Новосильцеву? Ничего. Они не поняли, они не могли понять самоотвержения нашего императора, который ничего не хочет для себя и все хочет для блага мира. И что они обещали? Ничего. И что обещали, и того не будет! Пруссия уже объявила, что Бонапарте непобедим и что вся Европа ничего не может против него... И я не верю ни в одном слове ни Гарденбергу, ни Гаугвицу. Cette fameuse neutralité prussienne, ce n'est qu'un piège 9. Я верю в одного Бога и в высокую судьбу нашего милого императора. Он спасет Европу!.. — Она вдруг остановилась с улыбкой насмешки над своею горячностью.— Я думаю, — сказал князь, улыбаясь, — что, ежели бы вас послали вместо нашего милого Винценгероде, вы бы взяли приступом согласие прусского короля. Вы так красноречивы. Вы дадите мне чаю?— Сейчас. A propos, — прибавила она, опять успокоиваясь, — нынче у меня два очень интересные человека, le vicomte de Mortemart, il est allié aux Montmorency par les Rohans 10, одна из лучших фамилий Франции. Это один из хороших эмигрантов, из настоящих. И потом l'abbé Morio; 11 вы знаете этот глубокий ум? Он был принят государем. Вы знаете?— А! Я очень рад буду, — сказал князь. — Скажите, — прибавил он, как будто только что вспомнив что-то и особенно-небрежно, тогда как то, о чем он спрашивал, было главной целью его посещения, — правда, что l'impératrice-mère 12 желает назначения барона Функе первым секретарем в Вену? C'est un pauvre sire, ce baron, à ce qu'il paraît 13. — Князь Василий желал определить сына на это место, которое через императрицу Марию Феодоровну старались доставить барону.Анна Павловна почти закрыла глаза в знак того, что ни она, ни кто другой не могут судить про то, что угодно или нравится императрице.— Monsieur le baron de Funke a été recommandé à l'impératrice-mère par sa soeur 14, — только сказала она грустным, сухим тоном. В то время как Анна Павловна назвала императрицу, лицо ее вдруг представило глубокое и искреннее выражение преданности и уважения, соединенное с грустью, что с ней бывало каждый раз, когда она в разговоре упоминала о своей высокой покровительнице. Она сказала, что ее величество изволила оказать барону Функе beaucoup d'estime 15, и опять взгляд ее подернулся грустью.Князь равнодушно замолк, Анна Павловна, с свойственною ей придворною и женскою ловкостью и быстротою такта, захотела и щелкануть князя за то, что он дерзнул так отозваться о лице, рекомендованном императрице, и в то же время утешить его.— Mais à propos de votre famille, — сказала она, — знаете ли, что ваша дочь, с тех пор как выезжает, fait les délices de tout le monde. On la trouve belle comme le jour 16.Князь наклонился в знак уважения и признательности.— Я часто думаю, — продолжала Анна Павловна после минутного молчания, придвигаясь к князю и ласково улыбаясь ему, как будто выказывая этим, что политические и светские разговоры кончены и теперь начинается задушевный, — я часто думаю, как иногда несправедливо распределяется счастие жизни. За что вам дала судьба таких двух славных детей (исключая Анатоля, вашего меньшого, я его не люблю, — вставила она безапелляционно, приподняв брови), — таких прелестных детей? А вы, право, менее всех цените их и потому их не сто́ите.И она улыбнулась своею восторженной улыбкой.— Que voulez-vous? Lafater aurait dit que je n'ai pas la bosse de la paternité 17, — сказал князь.— Перестаньте шутить. Я хотела серьезно поговорить с вами. Знаете, я недовольна вашим меньшим сыном. Между нами будь сказано (лицо ее приняло грустное выражение), о нем говорили у ее величества и жалеют вас...Князь не отвечал, но она молча, значительно глядя на него, ждала ответа. Князь Василий поморщился.— Что ж мне делать? — сказал он наконец. — Вы знаете, я сделал для их воспитания все, что может отец, и оба выш